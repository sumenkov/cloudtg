# CloudTG: справка по функциям и навигации

Этот документ описывает, как ориентироваться в CloudTG и где находится нужный функционал.

## 1. Что делает CloudTG
CloudTG хранит структуру папок и файлы в Telegram-канале **CloudTG**, а локально держит индекс и кеш для быстрого доступа.

Также используется сервисный канал **CloudTG Backups** для резервных копий локальной базы.

## 2. Навигация по интерфейсу

### 2.1 Верхняя панель
- `Справка` — открыть встроенный хелпер с описанием функций и навигации.
- `Настройки` / `Закрыть` — открыть или закрыть окно настроек.
- `Выйти` — разлогиниться из Telegram в CloudTG (доступно после авторизации).
- `Обновить сейчас` — запустить синхронизацию с каналом хранения.

### 2.2 Основной экран
Слева:
- Дерево папок.

Справа:
- Рабочая область с вкладками.

Вкладки:
- `Файлы` — загрузка, скачивание, открытие, удаление и шаринг файлов.
- `Папки` — создание, переименование, перенос и удаление папок.
- `Поиск` — поиск по имени и/или расширению.
- `Сервис` — служебные операции и восстановление поврежденной папки.

## 3. Основные сценарии

### 3.1 Первый запуск
1. Открой `Настройки`.
2. В разделе `Подключение Telegram` укажи `API_ID` и `API_HASH`.
3. Выбери режим хранения ключей.
4. Проверь путь к TDLib (или оставь автоопределение).
5. Нажми `Сохранить подключение`.
6. Вернись на главный экран и пройди авторизацию.
7. Нажми `Обновить сейчас`.

### 3.2 Открытие справки
Нажми кнопку `Справка` в верхней панели.

Откроется отдельное окно поверх интерфейса с полным текстом хелпера.

### 3.3 Загрузка файлов
Вкладка `Файлы`:
- кнопка `Выбрать и загрузить`;
- либо перетаскивание файлов в область загрузки.

### 3.4 Если отправить файл напрямую в Telegram-канал
Если файл отправлен вручную в канал **CloudTG**, он будет импортирован при синхронизации.

Если у сообщения нет корректного тега папки, файл попадет в папку **Неразобранное**.

### 3.5 Скачивание и открытие
Вкладка `Файлы`, у строки файла:
- `Скачать` — загрузить локальную копию;
- `Открыть` — открыть уже скачанный файл;
- `⋯ Действия` -> `Открыть папку` — открыть папку с локальной копией.

Во время скачивания показывается статус активной загрузки.

### 3.6 Поиск
Вкладка `Поиск`:
- поле имени;
- поле расширения/типа;
- переключатель поиска по текущей папке или по всему хранилищу.

### 3.7 Шаринг файлов в чат
Вкладка `Файлы` -> `⋯ Действия` -> `Поделиться`:
- выбрать чат из недавних или найти через поиск;
- отправить файл в выбранный чат.

## 4. Раздел «Настройки»

### 4.1 Подключение Telegram
- API-ключи (`API_ID`, `API_HASH`)
- режим хранения секретов
- путь к TDLib
- проверка отправки тестового сообщения

### 4.2 Обслуживание хранилища
- Проверка целостности последних сообщений
- Бэкап базы (`Создать бэкап`)
- Восстановление базы из бэкапа
- Каналы хранения:
  - `Открыть канал бэкапов`
  - `Создать новый канал CloudTG`
- Кеш TDLib:
  - оценка размера
  - очистка кеша

## 5. Если что-то не работает
- Проверь раздел статуса в `Настройки`.
- Проверь, что TDLib доступна.
- Запусти `Обновить сейчас` повторно.
- Посмотри логи:
  - portable: `./logs/cloudtg.jsonl.YYYY-MM-DD`
  - Linux/macOS с storage dir: `CLOUDTG_STORAGE_DIR/logs`

## 6. Где сообщить о проблеме
- GitHub Issues: https://github.com/sumenkov/cloudtg/issues
